<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Cynthia — online</title>
<style>
  :root{--bg:#0b0f14;--panel:#111623;--ink:#e9eef7;--muted:#8791a5;--hi:#6ec6ff;}
  html,body{background:var(--bg);color:var(--ink);margin:0;font-family:ui-sans-serif,system-ui}
  .wrap{max-width:820px;margin:40px auto;padding:16px}
  .card{background:var(--panel);border:1px solid #223046;border-radius:16px;padding:16px}
  h1{margin:0 0 8px;font-size:22px}
  .log{height:48vh;overflow:auto;border:1px solid #223046;border-radius:12px;padding:12px;background:#0a0e16}
  .msg{margin:10px 0}
  .me{color:#cdd7e8}
  .her{color:#b6ffea}
  .node{opacity:.8;font-size:12px}
  .row{display:flex;gap:8px;margin-top:12px}
  input,button{border-radius:10px;border:1px solid #223046;background:#0a0e16;color:var(--ink);padding:10px}
  input{flex:1}
  button{min-width:100px;cursor:pointer}
  a{color:var(--hi);text-decoration:none}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>✅ Cynthia is running</h1>
    <p style="color:var(--muted)">Type anything. She’ll “collapse” Body/Mind/Heart with a simple deterministic selector. We’ll swap in real models later.</p>

    <div id="log" class="log"></div>
    <div class="row">
      <input id="in" placeholder="tell Cynthia what's up…"/>
      <button id="send">Send</button>
    </div>

    <details style="margin-top:12px">
      <summary>Why this works (and your last one didn’t)</summary>
      <p>Agents expect a <em>server</em>. This repo has <code>app.py</code> (server) and <code>index.html</code> (UI). No blank repo, no confusion.</p>
    </details>
  </div>
</div>
<script>
const log = document.getElementById('log');
const input = document.getElementById('in');
const send = document.getElementById('send');

function push(role, text, node){
  const div = document.createElement('div');
  div.className = 'msg ' + (role==='you'?'me':'her');
  div.innerHTML = (role==='you' ? 'You' : 'Cynthia') + (node? ` <span class="node">[${node}]</span>`:'') + ': ' + text;
  log.appendChild(div);
  log.scrollTop = log.scrollHeight;
}

async function ask(){
  const message = input.value.trim();
  if(!message) return;
  input.value = '';
  push('you', message);
  try{
    const res = await fetch('/chat', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({message})});
    const js = await res.json();
    if(!js.ok) throw new Error(js.error||'fail');
    push('ai', js.reply, js.node);
  }catch(e){
    push('ai', 'Error: '+e.message);
  }
}

send.onclick = ask;
input.addEventListener('keydown', e=>{ if(e.key==='Enter') ask(); });
</script>
</body>
</html>